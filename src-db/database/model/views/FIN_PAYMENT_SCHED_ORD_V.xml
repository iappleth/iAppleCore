<?xml version="1.0"?>
  <database name="VIEW FIN_PAYMENT_SCHED_ORD_V">
    <view name="FIN_PAYMENT_SCHED_ORD_V"><![CDATA[SELECT fin_payment_schedule_id AS fin_payment_sched_ord_v_id, ad_client_id, ad_org_id, isactive, created, createdby, updated, updatedby, c_invoice_id, c_order_id, duedate, expecteddate, fin_paymentmethod_id, amount AS expected, paidamt AS received, outstandingamt AS outstanding, c_currency_id, (SELECT max(p.paymentdate) AS max FROM fin_payment p LEFT JOIN fin_payment_detail pd ON pd.fin_payment_id = p.fin_payment_id LEFT JOIN fin_payment_scheduledetail psd ON pd.fin_payment_detail_id = psd.fin_payment_detail_id WHERE ps.c_order_id IS NOT NULL AND psd.fin_payment_schedule_order = ps.fin_payment_schedule_id) AS lastpayment, (SELECT count(*) AS count FROM fin_payment_detail pd, fin_payment_scheduledetail psd WHERE pd.fin_payment_detail_id = psd.fin_payment_detail_id AND ps.c_order_id IS NOT NULL AND psd.fin_payment_schedule_order = ps.fin_payment_schedule_id) AS numberofpayments, fin_payment_priority_id, update_payment_plan FROM fin_payment_schedule ps]]></view>
  </database>
