<?xml version="1.0" encoding="UTF-8"?>

<output>
  <ticket>
  <%
    var total = OB.DEC.Zero;
    %>
    <line>
        <image>logofb.png</image>
    </line>
    <line></line>
    <line>
      <text align="center" length="42"><%= OB.UTIL.encodeXMLComponent('** Cash Management Confirmation Ticket **') %></text>
    </line>
    <line>
    </line>
    <line>
      <text align="left" length="42"><%= OB.UTIL.encodeXMLComponent('User: '+ OB.POS.modelterminal.get('context').user._identifier) %></text>
    </line>
    <line>
      <text align="left" length="42"><%= OB.UTIL.encodeXMLComponent('Time: '+ new Date().toString().substring(3,24)) %></text>
    </line>
    <line>
      <text align="left" length="42"><%= OB.UTIL.encodeXMLComponent('Store: '+ OB.POS.modelterminal.get('terminal').organization$_identifier) %></text>
    </line>
    <line>
      <text align="left" length="42"><%= OB.UTIL.encodeXMLComponent('Terminal: '+ OB.POS.modelterminal.get('terminal')._identifier) %></text>
    </line>
    <line>
    </line>
    <%
    cashmgmt.forEach(function(depositsdrops){
    if(depositsdrops.type==='drop'){
    %>
    <line>
      <text align ="left" length="25"><%=OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_LblDrop')+': '+depositsdrops.description) %></text>
      <text align ="right" length="14"><%= OB.DEC.sub(0,depositsdrops.amount) %></text>
    </line>
    <%
    total = OB.DEC.sub(total, depositsdrops.amount);
    }else{
    %>
     <line>
      <text align ="left" length="25"><%=OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_LblDeposit')+': '+depositsdrops.description) %></text>
      <text align ="right" length="14"><%= depositsdrops.amount %></text>
    </line>
    <%
    }
    total = OB.DEC.add(total, depositsdrops.amount);
    });
    %>
     <line>
      <text align ="left" length="25" bold="true"><%=OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_LblTotal')) %></text>
      <text align ="right" length="14" bold="true"><%= total %></text>
    </line>
  </ticket>
</output>