<?xml version="1.0" encoding="UTF-8"?>
<!--
************************************************************************************
* Copyright (C) 2013-2021 Openbravo S.L.U.
* Licensed under the Openbravo Commercial License version 1.0
* You may obtain a copy of the License at http://www.openbravo.com/legal/obcl.html
* or in the legal folder of this module distribution.
************************************************************************************
-->
<output>
  <display>
    <% const pendingAmount = OB.App.State.Ticket.Utils.getPendingAmount(ticket); %>
    <% if(pendingAmount === ticket.grossAmount){ 
    %>
      <line>
        <text align="left" length="10"><%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_display_total'))%></text>
        <text align="right" length="10"><%= OB.App.PrintUtils.printAmount(ticket.grossAmount)%></text>
      </line>
      <line>
        <text align="left" length="10"><%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_RemainingToPay'))%></text>
        <text align="right" length="10"><%= OB.App.PrintUtils.printAmount(pendingAmount)%></text>
      </line>
    <% }else{ 
    %>
      <% if(!ticket.change){   
      %>
      <line>
        <text align="left" length="10"><%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_Paid'))%></text>
        <text align="right" length="10"><%= OB.App.PrintUtils.printAmount(OB.DEC.sub(ticket.grossAmount, pendingAmount))%></text>
      </line>
      <line>
        <text align="left" length="10"><%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_RemainingToPay'))%></text>
        <text align="right" length="10"><%= OB.App.PrintUtils.printAmount(pendingAmount)%></text>
      </line>
    <% }else{ 
    %>
      <line>
        <text align="left" length="10"><%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_Paid'))%></text>
        <text align="right" length="10"><%= OB.App.PrintUtils.printAmount(OB.DEC.add(ticket.grossAmount, ticket.change))%></text>
      </line>
      <line>
        <text align="left" length="10"><%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel('OBPOS_ticketChange'))%></text>
        <text align="right" length="10"><%= OB.App.PrintUtils.printAmount(ticket.change)%></text>
      </line>
    <% } 
    %>
    <% } 
    %>
  </display>
</output>