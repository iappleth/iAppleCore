<?xml version="1.0" encoding="UTF-8"?>
<!--
************************************************************************************
* Copyright (C) 2013-2021 Openbravo S.L.U.
* Licensed under the Openbravo Commercial License version 1.0
* You may obtain a copy of the License at http://www.openbravo.com/legal/obcl.html
* or in the legal folder of this module distribution.
************************************************************************************
-->
<output>
  <display>
    <%
    let paidLabel;
    let paidAmount;
    let remainingLabel;
    let remainingAmount;
    if (ticket.change) {
      paidLabel = 'OBPOS_Paid';
      paidAmount = ticket.payment;
      remainingLabel = 'OBPOS_ticketChange';
      remainingAmount = ticket.change;
    } else if (ticket.payment > ticket.grossAmount) {
      paidLabel = 'OBPOS_Paid';
      paidAmount = ticket.payment;
      remainingLabel = 'OBPOS_Overpayment';
      remainingAmount = OB.DEC.sub(ticket.payment, ticket.grossAmount);
    } else if (ticket.payment === ticket.grossAmount) {
      paidLabel = 'OBPOS_Paid';
      paidAmount = ticket.payment;
      remainingLabel = 'OBPOS_RemainingToPay';
      remainingAmount = 0;
    } else if (ticket.payment > 0) {
      paidLabel = 'OBPOS_Paid';
      paidAmount = ticket.payment;
      remainingLabel = 'OBPOS_RemainingToPay';
      remainingAmount = OB.App.State.Ticket.Utils.getPendingAmount(ticket);
    } else {
      paidLabel = 'OBPOS_display_total';
      paidAmount = ticket.grossAmount;
      remainingLabel = 'OBPOS_RemainingToPay';
      remainingAmount = OB.App.State.Ticket.Utils.getPendingAmount(ticket);
    }
    %>
    <line>
      <text align="left" length="10"><%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel(paidLabel)) %></text>
      <text align="right" length="10"><%= OB.App.PrintUtils.printAmount(paidAmount) %></text>
    </line>
    <line>
      <text align="left" length="10"><%= OB.UTIL.encodeXMLComponent(OB.I18N.getLabel(remainingLabel)) %></text>
      <text align="right" length="10"><%= OB.App.PrintUtils.printAmount(remainingAmount) %></text>
    </line>
  </display>
</output>