<?xml version="1.0" encoding="UTF-8"?>

<output>
    <ticket>
        <line></line>
        <line>
            <text align="center" length="42">Openbravo Retail</text>
        </line>
        <line>
            <text align="center" length="42">Copyright 2007-2011 Openbravo, S.L.U.</text>
        </line>
        <line></line>
        
        <line>
            <text align="left" length="15">Document:</text>
            <text>9332</text>
        </line>
        <line>
            <text align="left" length="15">Date:</text>
            <text>Feb. 21, 2012.</text>
        </line>   
        
        <line></line>
        <line>
            <text align ="left" length="17">Item</text>
            <text align ="right" length="10">Price</text>
            <text align ="right" length="5"></text>
            <text align ="right" length="10">Value</text>
        </line>
        <line>
             <text>------------------------------------------</text>
        </line>
    <% 
     var total = 0;
     for (var i = 0, max = order.lines.length; i < max; i++) { 
       total += order.lines[i].price * order.lines[i].qty;
    %>
        
        <line>

            <text align ="left" length="17"><%= order.lines[i].productname %></text>

            <text align ="right" length="10"><%= OBPOS.Format.formatNumber(order.lines[i].price, { decimals: 2, decimal: '.', group: ',', currency: '$ #' }) %></text>
            <text align ="right" length="5">x<%= OBPOS.Format.formatNumber(order.lines[i].qty, { decimals: 0, decimal: '.', group: ',' }) %></text>
            <text align ="right" length="10"><%= OBPOS.Format.formatNumber(order.lines[i].price * order.lines[i].qty, { decimals: 2, decimal: '.', group: ',', currency: '$ #' }) %></text>
        </line>  
    <%
     } 
     %>
        <line>
             <text>------------------------------------------</text>
        </line>
        <line></line>
        <line size="1">
            <text align ="left" length="16" bold="true">Total.</text>
            <text align ="right" length="20" bold="true"><%= OBPOS.Format.formatNumber(total, { decimals: 2, decimal: '.', group: ',', currency: '$ #' }) %></text>
        </line>    
        
        
    </ticket>
        
    <display>
        <line>
            <text align="left" length="10">Total.</text>
            <text align="right" length="10"><%= OBPOS.Format.formatNumber(total, { decimals: 2, decimal: '.', group: ',', currency: '$ #' }) %></text>
        </line>
        <line>
           <text align="center" length="20">Thank you.</text>
        </line>
    </display>
    
    
    
    
</output>