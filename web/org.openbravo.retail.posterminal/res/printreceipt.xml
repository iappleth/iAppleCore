<?xml version="1.0" encoding="UTF-8"?>

<output>
    <ticket>
        <line></line>
        <line>
            <text align="center" length="42">Openbravo Retail</text>
        </line>
        <line>
            <text align="center" length="42">Copyright 2007-2011 Openbravo, S.L.U.</text>
        </line>
        <line></line>
        
        <line>
            <text align="left" length="15">Document:</text>
            <text><%= OB.UTIL.encodeXMLComponent(order.get('documentNo')) %></text>
        </line>
        <line>
            <text align="left" length="15">Date:</text>
            <text><%= OB.I18N.formatDate(order.get('orderDate')) %></text>
        </line>   
        
        <line></line>
        <line>
            <text align ="left" length="17">Item</text>
            <text align ="right" length="10">Price</text>
            <text align ="right" length="5"></text>
            <text align ="right" length="10">Value</text>
        </line>
        <line>
             <text>------------------------------------------</text>
        </line>
    <% 
     var lines = order.get('lines');
     for (var i = 0; i < lines.length; i++) { 
    %>
        
        <line>

            <text align ="left" length="17"><%= lines.at(i).get('product').get('product')._identifier %></text>

            <text align ="right" length="10"><%= lines.at(i).printPrice() %></text>
            <text align ="right" length="5">x<%= lines.at(i).printQty() %></text>
            <text align ="right" length="10"><%= lines.at(i).printGross() %></text>
        </line>  
    <%
     } 
    %>
        <line>
             <text>------------------------------------------</text>
        </line>  
    <% 
     var taxes = order.get('taxes');
     for (var t in taxes) { 
    %>   
        <line>
            <text align ="left" length="25">Total net</text>
            <text align ="right" length="10"><%= OB.I18N.formatCurrency(taxes[t].net) %></text>
        </line>   
        <line>
            <text align ="left" length="15"><%= taxes[t].name %></text>
            <text align ="right" length="10"><%= OB.I18N.formatRate(taxes[t].rate) %></text>
            <text align ="right" length="10"><%= OB.I18N.formatCurrency(taxes[t].amount) %></text>           
        </line>       
    <%
     } 
    %>        
        <line></line>
        <line size="1">
            <text align ="left" length="16" bold="true">Total.</text>
            <text align ="right" length="20" bold="true"><%= order.printGross() %></text>
        </line>    
        
        
    </ticket>
        
    <display>
        <line>
            <text align="left" length="10">Total.</text>
            <text align="right" length="10"><%= order.printGross() %></text>
        </line>
        <line>
           <text align="center" length="20">Thank you.</text>
        </line>
    </display>
    
    
    
    
</output>